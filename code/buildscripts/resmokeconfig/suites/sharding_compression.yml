selector:
  js_test:
    roots:
    - jstests/sharding/*.js
    exclude_files:
    #- jstests/sharding/printShardingStatus.js
    - jstests/sharding/add_invalid_shard.js
    - jstests/sharding/addshard1.js
    - jstests/sharding/addshard2.js
    - jstests/sharding/addshard4.js
    - jstests/sharding/addshard_idempotent.js
    - jstests/sharding/all_config_hosts_down.js
    - jstests/sharding/all_config_servers_blackholed_from_mongos.js
    - jstests/sharding/auth.js
    - jstests/sharding/auth_copydb.js
    - jstests/sharding/auth_repl.js
    - jstests/sharding/auth_sharding_cmd_metadata.js
    - jstests/sharding/auth_slaveok_routing.js
    - jstests/sharding/authCommands.js
    - jstests/sharding/auto_rebalance_parallel.js
    - jstests/sharding/auto_rebalance_parallel_replica_sets.js
    - jstests/sharding/autodiscover_config_rs_from_secondary.js
    - jstests/sharding/basic_merge.js
    - jstests/sharding/basic_sharding_params.js
    - jstests/sharding/basic_split.js
    - jstests/sharding/batch_write_command_sharded.js
    - jstests/sharding/bulk_shard_insert.js
    - jstests/sharding/cleanup_orphaned.js
    - jstests/sharding/cleanup_orphaned_auth.js
    - jstests/sharding/cleanup_orphaned_basic.js
    - jstests/sharding/cleanup_orphaned_cmd_during_movechunk.js
    - jstests/sharding/cleanup_orphaned_cmd_during_movechunk_hashed.js
    - jstests/sharding/cleanup_orphaned_cmd_hashed.js
    - jstests/sharding/cleanup_orphaned_cmd_prereload.js
    - jstests/sharding/cleanup_orphaned_compound.js
    - jstests/sharding/collation_targeting.js
    - jstests/sharding/collation_targeting_inherited.js
    - jstests/sharding/commands_that_write_accept_wc_configRS.js
    - jstests/sharding/commands_that_write_accept_wc_shards.js
    - jstests/sharding/conf_server_write_concern_metadata.js
    #conf_server_write_concern_data.js is excluded because error is checked on config when createIndex with writeconcern which is not majority. 
    - jstests/sharding/conf_server_write_concern_data.js 
    - jstests/sharding/config_rs_change.js
    - jstests/sharding/config_version_rollback.js
    - jstests/sharding/convert_to_and_from_sharded.js
    - jstests/sharding/copydb_from_mongos.js
    - jstests/sharding/count_slaveok.js
    - jstests/sharding/cursor_valid_after_shard_stepdown.js
    - jstests/sharding/delayed_shard_identity_upsert.js
    - jstests/sharding/dump_coll_metadata.js
    - jstests/sharding/empty_cluster_init.js
    - jstests/sharding/error_propagation.js
    - jstests/sharding/exact_shard_key_target.js
    - jstests/sharding/explain_read_pref.js
    - jstests/sharding/features1.js
    - jstests/sharding/features2.js
    - jstests/sharding/forget_mr_temp_ns.js
    - jstests/sharding/group_slaveok.js
    - jstests/sharding/hash_skey_split.js
    - jstests/sharding/idhack_sharded.js
    - jstests/sharding/implicit_db_creation.js
    - jstests/sharding/key_many.js
    - jstests/sharding/key_string.js
    - jstests/sharding/lagged_config_secondary.js
    - jstests/sharding/listshards.js
    - jstests/sharding/localhostAuthBypass.js
    - jstests/sharding/map_reduce_validation.js
    - jstests/sharding/mapReduce_inSharded.js
    - jstests/sharding/mapReduce_inSharded_outSharded.js
    - jstests/sharding/mapReduce_nonSharded.js
    - jstests/sharding/mapReduce_outSharded.js
    - jstests/sharding/max_time_ms_sharded.js
    - jstests/sharding/merge_chunks_compound_shard_key.js
    - jstests/sharding/merge_chunks_test.js
    - jstests/sharding/merge_chunks_test_with_md_ops.js
    - jstests/sharding/migration_id_index.js
    - jstests/sharding/migration_ignore_interrupts_1.js
    - jstests/sharding/migration_ignore_interrupts_2.js
    - jstests/sharding/migration_ignore_interrupts_3.js
    - jstests/sharding/migration_ignore_interrupts_4.js
    - jstests/sharding/migration_move_chunk_after_receive.js
    - jstests/sharding/migration_server_status.js
    - jstests/sharding/migration_sets_fromMigrate_flag.js
    - jstests/sharding/migration_with_source_ops.js
    - jstests/sharding/min_optime_recovery_on_failed_move_chunk_commit.js
    - jstests/sharding/min_optime_recovery_on_successful_move_chunk_commit.js
    - jstests/sharding/mongos_no_replica_set_refresh.js
    - jstests/sharding/mongos_rs_auth_shard_failure_tolerance.js
    - jstests/sharding/mongos_rs_shard_failure_tolerance.js
    - jstests/sharding/mongos_wait_csrs_initiate.js
    - jstests/sharding/movechunk_interrupt_at_primary_stepdown.js
    - jstests/sharding/movechunk_parallel.js
    - jstests/sharding/movechunk_with_moveParanoia.js
    - jstests/sharding/mr_and_agg_versioning.js
    - jstests/sharding/mr_shard_version.js
    - jstests/sharding/mrShardedOutput.js
    - jstests/sharding/mrShardedOutputAuth.js
    - jstests/sharding/names.js
    - jstests/sharding/pending_chunk.js
    - jstests/sharding/primary_config_server_blackholed_from_mongos.js
    - jstests/sharding/query_config.js
    - jstests/sharding/read_committed_lookup.js
    - jstests/sharding/read_pref.js
    - jstests/sharding/read_pref_cmd.js
    - jstests/sharding/recovering_slaveok.js
    - jstests/sharding/remove1.js
    - jstests/sharding/remove2.js
    - jstests/sharding/rename.js
    - jstests/sharding/repl_monitor_refresh.js
    - jstests/sharding/replmonitor_bad_seed.js
    - jstests/sharding/rs_stepdown_and_pooling.js
    - jstests/sharding/secondary_query_routing.js
    - jstests/sharding/shard3.js
    - jstests/sharding/shard_aware_init.js
    - jstests/sharding/shard_aware_init_secondaries.js
    - jstests/sharding/shard_aware_on_add_shard.js
    - jstests/sharding/shard_aware_on_config_election.js
    - jstests/sharding/shard_aware_on_set_shard_version.js
    - jstests/sharding/shard_aware_primary_failover.js
    - jstests/sharding/shard_identity_config_update.js
    - jstests/sharding/shard_identity_rollback.js
    - jstests/sharding/shard_insert_getlasterror_w2.js
    - jstests/sharding/shard_targeting.js
    - jstests/sharding/sharding_migrate_cursor1.js
    - jstests/sharding/sharding_multiple_ns_rs.js
    - jstests/sharding/sharding_options.js
    - jstests/sharding/sharding_rs1.js
    - jstests/sharding/sharding_rs2.js
    - jstests/sharding/sharding_system_namespaces.js
    - jstests/sharding/split_large_key.js
    - jstests/sharding/split_with_force.js
    - jstests/sharding/ssv_config_check.js
    - jstests/sharding/startup_with_all_configs_down.js
    - jstests/sharding/top_chunk_autosplit.js
    - jstests/sharding/trace_missing_docs_test.js
    - jstests/sharding/unowned_doc_filtering.js
    - jstests/sharding/use_rsm_data_for_cs.js
    - jstests/sharding/version1.js
    - jstests/sharding/version2.js
    - jstests/sharding/write_commands_sharding_state.js
    - jstests/sharding/zbigMapReduce.js
    - jstests/sharding/zero_shard_version.js

executor:
  js_test:
    config:
      shell_options:
        global_vars:
          TestData:
            networkMessageCompressors: snappy
        nodb: ''
        readMode: commands
